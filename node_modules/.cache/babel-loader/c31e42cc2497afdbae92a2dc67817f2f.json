{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\ENhabinde\\\\Desktop\\\\work\\\\New folder\\\\src\\\\utils\\\\auth\\\\RequiredAuth.jsx\";\nimport React, { useContext } from 'react';\nimport { Redirect, useLocation } from 'react-router-dom';\nimport { AuthContext } from '../../context/AuthProvider';\n\n//Este e o component responsavel pela protecao de rotas e redirecionamento\n/**\r\n * \r\n * @param children que sao as telas requisitadas e  allowedRoles array de roles necessarios para acessar a pagina\r\n * @returns pagina de login em caso de nao auhtenticacao ou  pagina unauthorized em caso do usuario\r\n * authenticado nao ter o role ou a pagina requisitada em casos de sucesso na autenticacao e autorizacao\r\n */\n\nvar RequiredAuth = function RequiredAuth(_ref) {\n  var children = _ref.children,\n    allowedRoles = _ref.allowedRoles;\n  var _useContext = useContext(AuthContext),\n    auth = _useContext.auth;\n  var location = useLocation();\n  var isAuth = window.location.toString().includes(\"mfl\");\n  if (auth && allowedRoles && auth.roles.find(function (role) {\n    return allowedRoles.includes(role);\n  }) || auth && !allowedRoles || isAuth) {\n    return children;\n  } else if (auth && auth.user) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/unauthorized\",\n      state: {\n        from: location\n      },\n      replace: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 16\n      }\n    });\n  }\n  return /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/login\",\n    state: {\n      from: location\n    },\n    replace: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 12\n    }\n  });\n};\nexport { RequiredAuth };","map":{"version":3,"names":["React","useContext","Redirect","useLocation","AuthContext","RequiredAuth","_ref","children","allowedRoles","_useContext","auth","location","isAuth","window","toString","includes","roles","find","role","user","createElement","to","state","from","replace","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Users/ENhabinde/Desktop/work/New folder/src/utils/auth/RequiredAuth.jsx"],"sourcesContent":["import React, { useContext } from 'react'\r\nimport { Redirect, useLocation} from 'react-router-dom';\r\nimport { AuthContext } from '../../context/AuthProvider';\r\n\r\n//Este e o component responsavel pela protecao de rotas e redirecionamento\r\n/**\r\n * \r\n * @param children que sao as telas requisitadas e  allowedRoles array de roles necessarios para acessar a pagina\r\n * @returns pagina de login em caso de nao auhtenticacao ou  pagina unauthorized em caso do usuario\r\n * authenticado nao ter o role ou a pagina requisitada em casos de sucesso na autenticacao e autorizacao\r\n */\r\n\r\nconst RequiredAuth = ({ children, allowedRoles }) => {\r\n\r\n    const { auth } = useContext(AuthContext);\r\n    const location = useLocation();\r\n    const isAuth = window.location.toString().includes(\"mfl\");\r\n    \r\n    if (((auth && allowedRoles) && auth.roles.find(role => allowedRoles.includes(role))) || (auth && !allowedRoles) || isAuth) {\r\n        return children;\r\n    } else if (auth && auth.user) {\r\n        return <Redirect to='/unauthorized' state={{ from: location }} replace />;\r\n    }\r\n    return <Redirect to='/login' state={{ from: location }} replace />;\r\n}\r\n\r\nexport { RequiredAuth }"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,SAASC,QAAQ,EAAEC,WAAW,QAAO,kBAAkB;AACvD,SAASC,WAAW,QAAQ,4BAA4B;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAmC;EAAA,IAA7BC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;IAAEC,YAAY,GAAAF,IAAA,CAAZE,YAAY;EAAA,IAAAC,WAAA,GAEzBR,UAAU,CAACG,WAAW,CAAC;IAAhCM,IAAI,GAAAD,WAAA,CAAJC,IAAI;EACZ,IAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,IAAMS,MAAM,GAAGC,MAAM,CAACF,QAAQ,CAACG,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,KAAK,CAAC;EAEzD,IAAML,IAAI,IAAIF,YAAY,IAAKE,IAAI,CAACM,KAAK,CAACC,IAAI,CAAC,UAAAC,IAAI;IAAA,OAAIV,YAAY,CAACO,QAAQ,CAACG,IAAI,CAAC;EAAA,EAAC,IAAMR,IAAI,IAAI,CAACF,YAAa,IAAII,MAAM,EAAE;IACvH,OAAOL,QAAQ;EACnB,CAAC,MAAM,IAAIG,IAAI,IAAIA,IAAI,CAACS,IAAI,EAAE;IAC1B,oBAAOnB,KAAA,CAAAoB,aAAA,CAAClB,QAAQ;MAACmB,EAAE,EAAC,eAAe;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEZ;MAAS,CAAE;MAACa,OAAO;MAAAC,MAAA,EAAAC,KAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAC;EAC7E;EACA,oBAAO/B,KAAA,CAAAoB,aAAA,CAAClB,QAAQ;IAACmB,EAAE,EAAC,QAAQ;IAACC,KAAK,EAAE;MAAEC,IAAI,EAAEZ;IAAS,CAAE;IAACa,OAAO;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC;AACtE,CAAC;AAED,SAAS1B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}