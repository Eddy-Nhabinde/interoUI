{"ast":null,"code":"/**\n * This function transforms the feature from reverse geocoding to plain text with specified accuracy\n * @param {object} feature \n * @param {string} accuracy \n * @returns \n */\nfunction transformFeatureToGeolocationText(feature, accuracy) {\n  var addrInfo = getAddressInfo(feature);\n  var addressAccuracy = ['address', 'street', 'place', 'country'];\n  var currentAccuracy;\n  if (typeof accuracy === 'function') {\n    return accuracy(addrInfo);\n  }\n  var accuracyIndex = addressAccuracy.indexOf(accuracy);\n  if (accuracyIndex === -1) {\n    currentAccuracy = addressAccuracy;\n  } else {\n    currentAccuracy = addressAccuracy.slice(accuracyIndex);\n  }\n  return currentAccuracy.reduce(function (acc, name) {\n    if (!addrInfo[name]) {\n      return acc;\n    }\n    if (acc !== '') {\n      acc = acc + ', ';\n    }\n    return acc + addrInfo[name];\n  }, '');\n}\n/**\n * This function transforms the feature from reverse geocoding to AddressInfo object\n * @param {object} feature \n * @returns {object}\n */\nfunction getAddressInfo(feature) {\n  var houseNumber = feature.address || '';\n  var street = feature.text || '';\n  var placeName = feature.place_name || '';\n  var address = placeName.split(',')[0];\n  var addrInfo = {\n    address: address,\n    houseNumber: houseNumber,\n    street: street,\n    placeName: placeName\n  };\n  feature.context.forEach(function (context) {\n    var layer = context.id.split('.')[0];\n    addrInfo[layer] = context.text;\n  });\n  return addrInfo;\n}\nvar REVERSE_GEOCODE_COORD_RGX = /^[ ]*(-?\\d{1,3}(\\.\\d{0,256})?)[, ]+(-?\\d{1,3}(\\.\\d{0,256})?)[ ]*$/;\nmodule.exports = {\n  transformFeatureToGeolocationText: transformFeatureToGeolocationText,\n  getAddressInfo: getAddressInfo,\n  REVERSE_GEOCODE_COORD_RGX: REVERSE_GEOCODE_COORD_RGX\n};","map":null,"metadata":{},"sourceType":"script"}